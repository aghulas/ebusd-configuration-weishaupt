# This device is the heating controller.
Master-Adresse: F1h
Slave-Adresse:  F6h 

The heating controller (heating circuit: "hc") is located in the WTC unit itself.

## How it works
The heating controller transmits actual values ​​such as operating phase and flow temperature via broadcast telegram 500A and receives setpoint values ​​from the heating circuit controllers in the system via telegram 0507.
The current heat demand is then calculated from this data.
The resulting heat demand for the heating circuit controller appears to be the highest value of all heat demands from the heating circuit controllers.

# Telegrams

## 500A - Process values ​​of the heating controller/burner control unit
This telegram is sent by the heating controller/burner control unit via broadcast.
```
M1  QQ   F1h Source
M2  ZZ = FEh Destination -> Broadcast
M3  PB = 50h
M4  SB = 0Ah
M5  NN = 0Dh Data length -> 14                                                  
M6       0Dh Status1                                                            
              Bit1:
              Bit2: 0=Summer, 1= Winter
              Bit3:
              Bit4:
              Bit5:
              Bit6:
              Bit7:
              Bit8:
M7       06h Operational phase (->I10)
              0x00=Burner Off
              0x01=Retirement Control Blower
              0x02=Pre RinseSpeed
              0x03=Countdown Pre RinseTime
              0x04=Reach Ignition Speed
              0x05=Flame Formation Time
              0x06=Burner In Operation
              0x07=Gas Valve ControlV1
              0x08=Gas Valve ControlV2
              0x09=Rinse
M8       7Fh Status2                                                           
              Bit1: ?
              Bit2: ?
              Bit3: ?
              Bit4: Flame     0=off, 1= on
              Bit5: Gas Valve1  0=open, 1= off
              Bit6: Gas Valve2  0=open, 1= off
              Bit7: Pump       0=off, 1=on
              Bit8: Error      0=None, 1=Error
M9       42h Status3
              Bit1:
              Bit2: Operation:   0=Summer, 1= Winter
              Bit3:
              Bit4:
              Bit5:
              Bit6:
              Bit7:
              Bit8:
M10      20h Load Position (->I11)        uch
M11      6ah Flow Temperature             data1c (0..100 / 0.5) -> 53°C
M12      ffh Exhaust Gas Temperature       data1C (0..100 / 0.5) -> --
M13      68h Hot Water Temperature         data1C (0..100 / 0.5) -> 
M14      00h ?                                                               
M15      0bh Outside Temperature          data1b (-127..127 / 1)-> 11        
M16      e1h Temperature Trend Byte1        data2b   -> Trend
M17      0ah                 Byte2 
M18      36h Flow Target Temperature      uch
```


## 0507 - Operating data of the controller on the burner control unit
These telegrams are sent from the heating circuit controllers to the heating controller/burner control unit.

This sub-command is responsible for the single or cyclic transmission of controller operating data. The controller sends the data either on request via the command "Operating data request from the burner control unit to the controller" (05h 06h) or automatically at a specific time interval.

However, the second option should not be used, as it unnecessarily burdens the bus even when no data is required. The cycle time is at least 5 seconds. This command should also be sent if changes occur within the cycle time.

Note: Values ​​that are not provided or cannot be provided by the controller are replaced with agreed-upon substitute values.

```
M1  QQ       Quelladresse
M2  ZZ       Zieladresse
M3  PB = 05h Burner Control
M4  SB = 07h Operating Data Controller
M5  NN = 09h Data length                             10:
M6           Status Heat Requirement                   opdataheat      
         00h Switch off Burner
         01h no action
         55h Domestic Hot Water Preparation
         AAh Heating operation
         CCh Emissions Control
         DDh Testing Function
         EEh Control Stop Function
         BBh Domestic Hot Water Preparation During Heating Operation
         44h Controller Stop Function During Staged Operation
M7           Action                                   opdataaction     12:
         00h no action
         01h Switch off Boiler Pump
         02h Switch on Boiler Pump
         03h Switching off Variable Loads
         04h Switching on Variable Loads
M8-          Boiler setpoint temperature        0-2000 DATA2c           14:
M9                                                     [1/16]           16:
M10          Boiler Setpoint Pressure           0-100  DATA2b           18:
M11                                                    [1/256]          20:
M12          Output Leve                        0-100                   22:
M13          Domestic hot water setpoint        0-100  DATA1c           24:
M14          Fuel choice                                                26:
M15 CRC
```

## Telegrams from WCM diagnosis
```
r,,SHC1,System Heat Control Part 1 ,,,"5000","0C73BB13AC",UKN0,s,UCH,,,unknown0 ,HC1.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 1 ,HC2.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 2 ,HC3.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 3 ,HC4.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 4 ,HC5.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 5 ,HC6.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 6 ,HC7.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 7 ,HC8.HeatingDemand,s,temp0,,,Heat Demand Heating Circuit 8 ,UKN1,s,UCH,,,unknown1 ,UKN2,s,UCH,,,unknown2 
r,,SHC2,System Heat Control Part 2 ,,,"5000","E353AE03C3016F",UKN0,s,UCH,,,unknown0 ,UKN1,s,UCH,,,unknown1 ,UKN2,s,UCH,,,unknown2 ,UKN3,s,UCH,,,unknown3 ,UKN4,s,UCH,,,unknown4 ,UKN5,s,UCH,,,unknown5 ,UKN6,s,UCH,,,unknown6 ,SetpointTempSystem,s,temp0,,,Target Temperature System ,SetpointDHW,s,temp0,,,Hot Water Setpoint 
```
